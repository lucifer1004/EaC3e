<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Types and Functions - Reading Notes</title>


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        <link rel="stylesheet" href=".././css/last-changed.css">
        <link rel="stylesheet" href=".././css/mdbook-admonish.css">

        <!-- MathJax -->
        <script async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var html = document.querySelector('html');
            var sidebar = null;
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item affix "><a href="../index.html">Table of Contents</a></li><li class="chapter-item "><a href="../engineering_a_compiler_third_edition/index.html"><strong aria-hidden="true">1.</strong> Engineering a Compiler (3rd Edition)</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../engineering_a_compiler_third_edition/chapter_1.html"><strong aria-hidden="true">1.1.</strong> Overview of Compilation</a></li><li class="chapter-item "><a href="../engineering_a_compiler_third_edition/chapter_2.html"><strong aria-hidden="true">1.2.</strong> Scanners</a></li></ol></li><li class="chapter-item expanded "><a href="../category_theory_for_programmers/index.html"><strong aria-hidden="true">2.</strong> Category Theory for Programmers</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../category_theory_for_programmers/chapter_1.html"><strong aria-hidden="true">2.1.</strong> Category: The Essence of Composition</a></li><li class="chapter-item expanded "><a href="../category_theory_for_programmers/chapter_2.html" class="active"><strong aria-hidden="true">2.2.</strong> Types and Functions</a></li></ol></li><li class="chapter-item "><a href="../calculus_of_computation/index.html"><strong aria-hidden="true">3.</strong> The Calculus of Computation</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../calculus_of_computation/chapter_1.html"><strong aria-hidden="true">3.1.</strong> Propositional Logic</a></li></ol></li><li class="chapter-item "><a href="../geometric_data_structures_for_computer_graphics/index.html"><strong aria-hidden="true">4.</strong> Geometric Data Structures for Computer Graphics</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../geometric_data_structures_for_computer_graphics/chapter_1.html"><strong aria-hidden="true">4.1.</strong> Quadtrees and Octrees</a></li></ol></li><li class="chapter-item "><a href="../patterns_for_parallel_programming/index.html"><strong aria-hidden="true">5.</strong> Patterns for Parallel Programming</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../patterns_for_parallel_programming/chapter_1.html"><strong aria-hidden="true">5.1.</strong> A Pattern Language for Parallel Programming</a></li><li class="chapter-item "><a href="../patterns_for_parallel_programming/chapter_2.html"><strong aria-hidden="true">5.2.</strong> Background and Jargon of Parallel Computing</a></li><li class="chapter-item "><a href="../patterns_for_parallel_programming/chapter_3.html"><strong aria-hidden="true">5.3.</strong> The Finding Concurrency Design Space</a></li></ol></li><li class="chapter-item "><a href="../structured_parallel_programming/index.html"><strong aria-hidden="true">6.</strong> Structured Parallel Programming</a><a class="toggle"><div>❱</div></a></li><li><ol class="section"><li class="chapter-item "><a href="../structured_parallel_programming/chapter_1.html"><strong aria-hidden="true">6.1.</strong> Introduction</a></li></ol></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Reading Notes</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/lucifer1004/computer-book-notes" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="chapter-2-types-and-functions"><a class="header" href="#chapter-2-types-and-functions">Chapter 2 Types and Functions</a></h1>
<ul>
<li><a href="#21-who-needs-types">2.1 Who Needs Types</a></li>
<li><a href="#22-types-are-about-composability">2.2 Types Are About Composability</a></li>
<li><a href="#23-what-are-types">2.3 What Are Types?</a></li>
<li><a href="#24-why-do-we-need-a-mathematical-model">2.4 Why Do We Need a Mathematical Model?</a></li>
<li><a href="#25-pure-and-dirty-functions">2.5 Pure and Dirty Functions</a></li>
<li><a href="#26-examples-of-types">2.6 Examples of Types</a></li>
<li><a href="#27-challenges">2.7 Challenges</a>
<ul>
<li><a href="#challenge-21-higher-order-memoize">Challenge 2.1 Higher-order <code>memoize</code></a></li>
<li><a href="#challenge-22-memoize-rng">Challenge 2.2 Memoize RNG</a></li>
<li><a href="#challenge-23-memoize-rng-with-seed">Challenge 2.3 Memoize RNG with seed</a></li>
<li><a href="#challenge-24-which-is-pure">Challenge 2.4 Which is pure</a></li>
<li><a href="#challenge-25-bool-to-bool">Challenge 2.5 Bool to Bool</a></li>
<li><a href="#challenge-26-draw-category">Challenge 2.6 Draw category</a></li>
</ul>
</li>
</ul>
<h2 id="21-who-needs-types"><a class="header" href="#21-who-needs-types">2.1 Who Needs Types</a></h2>
<div id="admonition-quote" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="#admonition-quote"></a></p>
</div>
<div>
<p>Do we want to make monkeys happy, or do we want to produce correct programs?</p>
</div>
</div>
<h2 id="22-types-are-about-composability"><a class="header" href="#22-types-are-about-composability">2.2 Types Are About Composability</a></h2>
<h2 id="23-what-are-types"><a class="header" href="#23-what-are-types">2.3 What Are Types?</a></h2>
<div id="admonition-quote-1" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="#admonition-quote-1"></a></p>
</div>
<div>
<p>The simplest intuition for types is that they are <strong>set</strong> of values.</p>
</div>
</div>
<p>Here, sets can be finite or infinite.</p>
<p>Ideally we can consider types to be sets and functions to be mathematical functions between sets. But we will encounter the halting problem since there are functions that never terminate. That is why we introduce \(\bot\), which means a non-terminating computation. So a function with the following signature:</p>
<pre><code class="language-rust  ignore">fn f(x: bool) -&gt; bool {}</code></pre>
<p>may return <code>true</code>, <code>false</code>, or \(\bot\).</p>
<p>For example, the following program:</p>
<pre><code class="language-rust  ignore">fn f(x: bool) -&gt; bool {
    !f(x)
}

fn main() {
    println!(&quot;{}&quot;, f(true));
}</code></pre>
<p>compiles but never terminate.</p>
<p>Such functions are called <strong>partial functions</strong>, as opposed to <strong>total functions</strong>, which return valid results for every possible argument.</p>
<h2 id="24-why-do-we-need-a-mathematical-model"><a class="header" href="#24-why-do-we-need-a-mathematical-model">2.4 Why Do We Need a Mathematical Model?</a></h2>
<div id="admonition-quote-2" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="#admonition-quote-2"></a></p>
</div>
<div>
<p>The problem is that it's very hard to prove things about programs using operational semantics.</p>
</div>
</div>
<p>An alternative is <em>denotational semantics</em>, which is based on math.</p>
<p>Difficulty: computational effects (e.g., I/O)</p>
<p>Solution: mapping to monads (by Eugenio Moggi)</p>
<div id="admonition-quote-3" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="#admonition-quote-3"></a></p>
</div>
<div>
<p>One of the important advantages of having a mathematical model for programming is that it’s possible to perform formal proofs of correctness of software.</p>
</div>
</div>
<h2 id="25-pure-and-dirty-functions"><a class="header" href="#25-pure-and-dirty-functions">2.5 Pure and Dirty Functions</a></h2>
<div id="admonition-what-is-a-pure-function" class="admonition note">
<div class="admonition-title">
<p>What is a pure function?</p>
<p><a class="admonition-anchor-link" href="#admonition-what-is-a-pure-function"></a></p>
</div>
<div>
<p>A <strong>pure function</strong> is a function which is guaranteed to produce the same output every time it's called with the same input, and has no side effects.</p>
</div>
</div>
<h2 id="26-examples-of-types"><a class="header" href="#26-examples-of-types">2.6 Examples of Types</a></h2>
<p>Empty set: Haskell <code>Void</code> (not C++ <code>void</code>, which is actually <code>unit</code>).</p>
<p>Singleton set: C++ <code>void</code>, Haskell/Rust <code>()</code>.</p>
<p>A function without explicit arguments does not mean it takes nothing. This is best shown in Haskell:</p>
<pre><code class="language-haskell">f44 :: () -&gt; Integer 
f44 () = 44
</code></pre>
<p>The function <code>f44</code> above obviously takes <code>()</code>, which is the only element in the singleton unit set.</p>
<div id="admonition-quote-4" class="admonition quote">
<div class="admonition-title">
<p>Quote</p>
<p><a class="admonition-anchor-link" href="#admonition-quote-4"></a></p>
</div>
<div>
<p>Functions that can be implemented with the same formula for any type are called parametrically polymorphic.</p>
</div>
</div>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn unit&lt;T&gt;(x: T) {}
<span class="boring">}</span></code></pre></pre>
<p>Two-element set: C++/Rust <code>bool</code>, Haskell <code>Bool</code>. Functions to these two-element sets are called <em>predicates</em>.</p>
<h2 id="27-challenges"><a class="header" href="#27-challenges">2.7 Challenges</a></h2>
<h3 id="challenge-21-higher-order-memoize"><a class="header" href="#challenge-21-higher-order-memoize">Challenge 2.1 Higher-order <code>memoize</code></a></h3>
<pre><pre class="playground"><code class="language-rust">use std::collections::HashMap;
use std::hash::Hash;

fn memoize&lt;A, B, F&gt;(f: F) -&gt; impl FnMut(A) -&gt; B
where
    F: Fn(A) -&gt; B,
    A: Eq + Hash + Clone,
    B: Clone,
{
    let mut cache: HashMap&lt;A, B&gt; = HashMap::new();
    move |arg| {
        if let Some(result) = cache.get(&amp;arg) {
            result.clone()
        } else {
            println!(&quot;Evaluated!&quot;);
            let result = f(arg.clone());
            cache.insert(arg, result.clone());
            result
        }
    }
}

fn main() {
    let mut f = memoize(|n| 2 * n);
    println!(&quot;{}&quot;, f(20)); // First-time call, evaluated
    println!(&quot;{}&quot;, f(20)); // Memoization used
}</code></pre></pre>
<h3 id="challenge-22-memoize-rng"><a class="header" href="#challenge-22-memoize-rng">Challenge 2.2 Memoize RNG</a></h3>
<p>This cannot be reached.</p>
<h3 id="challenge-23-memoize-rng-with-seed"><a class="header" href="#challenge-23-memoize-rng-with-seed">Challenge 2.3 Memoize RNG with seed</a></h3>
<pre><code class="language-rust  ignore">extern crate rand;
extern crate rand_chacha;
use rand::prelude::*;
use rand_chacha::ChaCha8Rng;

fn main() {
    let mut memoized_rng = |seed: u64| {
        let mut rng = ChaCha8Rng::seed_from_u64(seed);
        rng.gen::&lt;u64&gt;()
    };
    println!(&quot;{}&quot;, memoized_rng(0));
    println!(&quot;{}&quot;, memoized_rng(0));
    println!(&quot;{}&quot;, memoized_rng(1));
    println!(&quot;{}&quot;, memoized_rng(1));
}</code></pre>
<h3 id="challenge-24-which-is-pure"><a class="header" href="#challenge-24-which-is-pure">Challenge 2.4 Which is pure</a></h3>
<p>The factorial function is pure. Other functions have side effects (input, output, global state).</p>
<h3 id="challenge-25-bool-to-bool"><a class="header" href="#challenge-25-bool-to-bool">Challenge 2.5 Bool to Bool</a></h3>
<pre><pre class="playground"><code class="language-rust"><span class="boring">#![allow(unused)]
</span><span class="boring">fn main() {
</span>fn id(x: bool) -&gt; bool {
    x
}

fn not(x: bool) -&gt; bool {
    !x
}

fn always_true(x: bool) -&gt; bool {
    true
}

fn always_false(x: bool) -&gt; bool {
    false
}
<span class="boring">}</span></code></pre></pre>
<h3 id="challenge-26-draw-category"><a class="header" href="#challenge-26-draw-category">Challenge 2.6 Draw category</a></h3>
<pre class="mermaid">flowchart LR
    Void
    Unit
    Unit --&gt;|id| Unit
    Bool
    Bool --&gt;|unit| Unit
    Unit --&gt;|true| Bool
    Unit --&gt;|false| Bool
    Bool --&gt;|id| Bool
    Bool --&gt;|not| Bool
    Bool --&gt;|true| Bool
    Bool --&gt;|false| Bool
</pre>
<footer id="last-change">Last change: 2023-04-18, commit: <a href="https://github.com/lucifer1004/computer-book-notes/commit/c74863c">c74863c</a></footer>
                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../category_theory_for_programmers/chapter_1.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next" href="../calculus_of_computation/index.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../category_theory_for_programmers/chapter_1.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next" href="../calculus_of_computation/index.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->
        <script src="../mermaid.min.js"></script>
        <script src="../mermaid-init.js"></script>


    </div>
    </body>
</html>
